#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ”’ Running pre-push quality checks..."
echo ""

# Run unit tests
echo "ğŸ“Š Running unit tests..."
npm run test:run || {
  echo "âŒ Unit tests failed! Fix tests before pushing."
  exit 1
}

echo ""

# Run TypeScript check (incremental for speed, excludes test files for memory)
echo "ğŸ” Running TypeScript check..."
npx tsc --project tsconfig.typecheck.json || {
  echo "âŒ TypeScript errors found! Fix type errors before pushing."
  exit 1
}

echo ""

# Run lint check
echo "ğŸ” Running lint check..."
npm run lint || {
  echo "âŒ Lint errors found! Fix lint errors before pushing."
  exit 1
}

echo ""
echo "âœ… All local checks passed! Pushing to remote..."
